<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Currency Quick-Convert</title>
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2454/2454282.png">
    <style>
        body { font-family: -apple-system, sans-serif; padding: 20px; background: #f8f9fa; }
        .container { max-width: 400px; margin: auto; }
        .input-group { margin-bottom: 25px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; color: #444; }
        input { 
            width: 100%; padding: 18px; font-size: 1.4rem; 
            border: 2px solid #ced4da; border-radius: 12px; box-sizing: border-box; 
            background: white; -webkit-appearance: none;
        }
        input:focus { border-color: #007bff; outline: none; box-shadow: 0 0 8px rgba(0,123,255,0.2); }
        .status { font-size: 0.8rem; color: #888; text-align: center; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="input-group">
        <label>USD (US Dollar)</label>
        <input type="number" id="usd" placeholder="0.00" oninput="convert('usd')" onclick="clearAll()">
    </div>

    <div class="input-group">
        <label>CAD (Canadian Dollar)</label>
        <input type="number" id="cad" placeholder="0.00" oninput="convert('cad')" onclick="clearAll()">
    </div>

    <div class="input-group">
        <label>NIO (Cordoba)</label>
        <input type="number" id="nio" placeholder="0.00" oninput="convert('nio')" onclick="clearAll()">
    </div>
    
    <div id="status" class="status">Fetching live rates...</div>
</div>

<script>
    // Default fallback rates (in case the internet is down)
    let rates = { CAD: 1.37, NIO: 36.70 };

    // Function to get real-time rates
    async function fetchRates() {
        try {
            const response = await fetch('https://open.er-api.com/v6/latest/USD');
            const data = await response.json();
            
            if (data && data.rates) {
                rates.CAD = data.rates.CAD;
                rates.NIO = data.rates.NIO;
                document.getElementById('status').innerText = "Live rates updated: " + new Date().toLocaleTimeString();
            }
        } catch (error) {
            document.getElementById('status').innerText = "Using offline rates.";
            console.error("Error fetching rates:", error);
        }
    }

    // Run the fetch when the app starts
    fetchRates();

    function convert(sourceId) {
        const inputField = document.getElementById(sourceId);
        const val = parseFloat(inputField.value);
        
        if (isNaN(val)) return;

        let usdBase;
        if (sourceId === 'usd') usdBase = val;
        else if (sourceId === 'cad') usdBase = val / rates.CAD;
        else if (sourceId === 'nio') usdBase = val / rates.NIO;

        if (sourceId !== 'usd') document.getElementById('usd').value = usdBase.toFixed(2);
        if (sourceId !== 'cad') document.getElementById('cad').value = (usdBase * rates.CAD).toFixed(2);
        if (sourceId !== 'nio') document.getElementById('nio').value = (usdBase * rates.NIO).toFixed(2);
    }

    function clearAll() {
        document.getElementById('usd').value = '';
        document.getElementById('cad').value = '';
        document.getElementById('nio').value = '';
    }
</script>

</body>
</html>

